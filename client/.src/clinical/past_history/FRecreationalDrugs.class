' Gambas class file

' -- work on recreational drug use tables
' drop table clin_history.data_recreational_drugs;
' 
' Create table clin_history.lu_recreational_drugs
' (pk serial primary key,
' drug text not null,
' alternative_names text default null,
' illict boolean not null default true);
' 
' comment on table clin_history.lu_recreational_drugs is
' 'A list of common recreational drugs';
' comment on column clin_history.lu_recreational_drugs.alternative_names is
' 'a space-separated list of alternative names or subtypes';
' comment on column clin_history.lu_recreational_drugs.illict is
' 'true if illegal to use recreationally in most Australian jurisdictions';
'  
' Insert into clin_history.lu_recreational_drugs (drug, alternative_names, illict) values ('nicotine','cigarette cigar rollies chop-chop', false);
' Insert into clin_history.lu_recreational_drugs (drug, alternative_names, illict) values ('alcohol','ethanol booze piss goon drink mixers',false);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('opiate', 'heroin morphine oxycodone oxies smack shit ms-contin', true);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('cocaine','crack rock coke powder', true);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('caffeine','coffee', false);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('cannabis', 'THC skunk weed grass green bud synthetic-cannabis mary-jane wacky-baccy', true);
' -- God only knows what "synthetic cannabis" actually is!
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('benzodiazepines','valium xanax mogadon moggies serepax serries', true);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('inhalants','solvents glue', false);
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('petrol','fuel gas', false);
' insert into clin_history.lu_recreational_drugs (drug,alternative_names,illict) values  ('amphetamine', 'metamphetamine ice speed methylphenidate ritalin', true);
' -- contrary to the firm belief of many users there is no effective difference between
' -- "speed" and "ice": the same mixture of amphetamines created in the backyard lab
' -- will be sold by dealers as "ice" to increase cachet (and so value)
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('psychedelics','LSD angel-dust acid shrooms mushies', true);
' -- technically angel dust is phencycline, and mushrooms may contain a 
' -- variety of compounds, chiefly mescaline, but again clinically it doesn't really make
' -- a difference
' insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('MDMA','xtc ecstasy extasy', true);
' -- in practice "ecstasy" often has the same issue as "ice": whatever claimed by the dealer
' -- the pill will usually contain plain old amphetamine
' Insert into clin_history.lu_recreational_drugs (drug,alternative_names, illict) values ('kava','', false);
' -- yes it is legal, apparently
' 
' 
' 
' 
' 
' CREATE TABLE clin_history.data_recreational_drugs
' (
'   pk serial primary key,
'   fk_consult integer not null,
'   fk_lu_recreational_drug integer not null,
'   age_started integer default null,
'   age_last_used integer default null,
'   substance_amount integer default null,
'   fk_substance_unit_amount integer default null,
'   fk_lu_substance_frequency integer default null,
'   fk_lu_route_administration integer default null,
'   notes text,
'   deleted boolean,
'   CONSTRAINT data_recreational_drugs_fk_consult FOREIGN KEY (fk_consult)
'       REFERENCES clin_consult.consult (pk) MATCH SIMPLE
'       ON UPDATE NO ACTION ON DELETE NO ACTION,
'   CONSTRAINT data_recreational_drugs_fk_lu_recreational_drug FOREIGN KEY (fk_lu_recreational_drug)
'       REFERENCES clin_history.lu_recreational_drugs (pk) MATCH SIMPLE
'       ON UPDATE NO ACTION ON DELETE NO ACTION
'  );
' 
' Comment on table clin_history.data_recreational_drugs is
' 'A list of the patient''s recreational drug use
'  - note it is not possible to be absolutely precise about age started/stopped drugs a use can start stop, so comments should be added to the notes field';
' comment on column  clin_history.data_recreational_drugs.fk_lu_recreational_drug is 'foreign key to clin_history.lu_recreational_drugs';
' comment on column  clin_history.data_recreational_drugs.age_started is 'the age the patient first used this drug';
' comment on column  clin_history.data_recreational_drugs.age_last_used is 'the age the patient last used or stopped using the drug';
' comment on column  clin_history.data_recreational_drugs.substance_amount is 'the quantity of the substance e.g 10 if say 10gm of alcohol per day see lu_substance_frequency';
' comment on column  clin_history.data_recreational_drugs.fk_lu_substance_frequency is 'foreign key to common.lu_units but front end will allow on day/week/month/year';
' comment on column  clin_history.data_recreational_drugs.fk_substance_unit_amount is 'the units for the substance amount eg gm key to common.lu_units (to be restricted in the front end';
' comment on column  clin_history.data_recreational_drugs.fk_lu_route_administration is 'key to common.lu_route_administration';
' comment on column  clin_history.data_recreational_drugs.notes is 'any qualifying information about the drug eg, ''used intermittently 20-30, stopped in 30''s, started again in 40''s';
' 
' truncate db.lu_version;
' insert into db.lu_version (lu_major,lu_minor) values (0, 259);
' 
' 
