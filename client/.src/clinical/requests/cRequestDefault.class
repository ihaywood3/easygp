' Gambas class file

' Copyright (C) 2008-2012 Dr. Richard Terry

' This program is free software: you can redistribute it and/or modify
' it under the terms of the GNU General Public License as published by
' the Free Software Foundation, either version 3 of the License, or
' (at your option) any later version.

' This program is distributed in the hope that it will be useful,
' but WITHOUT ANY WARRANTY; without even the implied warranty of
' MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
' GNU General Public License for more details.

' You should have received a copy of the GNU General Public License
' along with this program.  If not, see <http://www.gnu.org/licenses/>.
'-------------------------------------------------------------------------------
' defines default provider and default branch for provider on per_type basis
'eg fk_lu_type = 1 (pathology), A Company (fk_organisation) a Branch (fk_branch)
'-------------------------------------------------------------------------------
' CREATE OR REPLACE VIEW clin_requests.vwuserproviderdefaults AS 
'  SELECT user_provider_defaults.fk_staff, data_branches.branch AS head_office_branch, data_organisations.organisation, lu_towns.postcode AS organisation_postcode, lu_towns.town AS organisation_town, lu_towns.state AS organisation_state, data_addresses.street AS organisation_street, data_addresses.head_office, lu_categories.category, data_branches1.branch AS default_branch, data_addresses1.street, lu_towns1.postcode, lu_towns1.town, lu_towns1.state
'    FROM contacts.data_branches
'    JOIN contacts.data_organisations ON data_branches.fk_organisation = data_organisations.pk
'    JOIN contacts.data_addresses ON data_branches.fk_address = data_addresses.pk
'    JOIN contacts.lu_towns ON data_addresses.fk_town = lu_towns.pk
'    JOIN contacts.lu_categories ON data_branches.fk_category = lu_categories.pk
'    JOIN clin_requests.user_provider_defaults ON data_branches.pk = user_provider_defaults.fk_head_office_branch
'    JOIN contacts.data_branches data_branches1 ON user_provider_defaults.fk_default_branch = data_branches1.pk
'    JOIN contacts.data_addresses data_addresses1 ON data_branches1.fk_address = data_addresses1.pk
'    JOIN contacts.lu_towns lu_towns1 ON data_addresses1.fk_town = lu_towns1.pk
'   ORDER BY user_provider_defaults.fk_staff;


Public pk_default As Integer
Public fk_staff As Integer
Public fk_category As Integer 'duplicated is within cBranch
Public category As String
'Public Default_Branch As cBranch
'Public Head_office As cBranch 
Public data_changed As Boolean  
Public send_electronically As Boolean
Public print_paper As Boolean
